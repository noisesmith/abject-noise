# the game of LIFE by conway, represented in ARM assembler
#
.text
.global _start

_start:
	push	{r11, lr}	// prologue:	save frame pointer, lr
	add	r11, sp, #0	//		setting the bottom of the stack frame
	sub	sp, sp, #16	//		allocating stack
	mov	r0, #1		// set up call: fd to print to
	bl	print_board
	mov	r1, r0		// result of print_board
	sub	sp, r11, #0	// epilogue: reset the stack pointer
	mov	r0, #0		// exit success
	b	_exit		//
_exit:
	mov r7, #1 // system call register, exit index
	swi #0

print_board: // args: fd
	push	{r11}		// prologue:	save the frame pointer
	add	r11, sp, #0	//		set the bottom of the stack frame
	sub	sp, sp,	#12	//		allocating stack space
	mov	r9, r0		// fd to print to, our only arg
	ldr	r2, the_board	// get the board
// a loop, we process the byte at one address (8 board locations) per cycle
	mov	r0, #0		// prelude to loop - r0 holds byte index
_do_N:
	ldrb	r1, [r2, r0] // one byte, with indexing
	mov	r3, #1 // setting up the innermost index (bitmask within byte)
_do_one: // inner loop, for each bit of the board
	// TODO - maybe instead of a nested loop we want a subindex that uses modulo
	add	sp, r11, #0	//	epilogue:	adjusting the stack pointer
	pop	{r11}		//			restoring the frame pointer
	bx	lr		//			jump back via lr
	
	

the_board: .word board

.data
// 64 x 64 bits
board:

.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000

.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000


.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000

.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000


.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000

.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000


.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000

.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000


.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000

.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000


.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000

.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000


.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000

.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000


.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000

.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
.byte 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000, 0b00010001, 0b00000000
